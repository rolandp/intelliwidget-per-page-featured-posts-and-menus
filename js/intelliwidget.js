jQuery(document).ready(function(a){jQuery("body").on("click",".iw-collapsible",function(){id=jQuery(this).attr("id");sel="#"+id+"-inside";jQuery(sel).stop().slideToggle()});jQuery("body").on("click",".iw-save",iw_save_postdata);jQuery("body").on("click",".iw-copy",iw_copy_page);jQuery("body").on("click",".iw-add",iw_add_meta_box);jQuery("body").on("click",".iw-delete",iw_delete_meta_box)});var iw_save_postdata=function(){jQuery(this).attr("disabled","disabled");jQuery(".iw-copy-container,.iw-save-container").removeClass("success failure");var d=jQuery(this).attr("id");var b="#"+d;jQuery("body").off("click",b,iw_save_postdata);var c="intelliwidget_"+d.split("_")[1];jQuery("#"+c+"_spinner").show();var a={};a[c+"_post_types"]=[];jQuery("input[name=post_ID],input[name=iwpage],input[type=text][id^="+c+"],input[type=checkbox][id^="+c+"]:checked,select[id^="+c+"],textarea[id^="+c+"]").each(function(e,f){fieldID=jQuery(this).attr("id");if(fieldID.indexOf("_post_types")>0){a[fieldID].push(jQuery(this).val())}else{a[fieldID]=jQuery(this).val()}});a.action="iw_save";jQuery.post(IWAjax.ajaxurl,a,function(e){jQuery(b).removeAttr("disabled");jQuery("#"+c+"_spinner").hide();jQuery(b).parent().addClass("success");return false});return false};var iw_copy_page=function(){jQuery(this).attr("disabled","disabled");jQuery(".iw-copy-container,.iw-save-container").removeClass("success failure");jQuery("body").off("click","#iw_copy",iw_copy_page);jQuery("#intelliwidget_spinner").show();var a={};jQuery("input[name=post_ID],input[name=iwpage],select[id=intelliwidget_widget_page_id]").each(function(b,c){fieldID=jQuery(this).attr("id");a[fieldID]=jQuery(this).val()});a.action="iw_copy";jQuery.post(IWAjax.ajaxurl,a,function(b){jQuery("#iw_copy").removeAttr("disabled");jQuery("#intelliwidget_spinner").hide();jQuery(".iw-copy-container").addClass("success");return false});return false};var iw_add_meta_box=function(d){d.stopPropagation();if(jQuery(this).hasClass("disabled")){return false}jQuery(this).addClass("disabled");jQuery(".iw-copy-container,.iw-save-container").removeClass("success failure");var f=jQuery(this).attr("id");var c="#"+f;var b=jQuery(this).attr("href");var a=URLToArray(b);jQuery("#intelliwidget_spinner").show();a.action="iw_add";jQuery.post(IWAjax.ajaxurl,a,function(e){jQuery(c).removeClass("disabled");jQuery("#intelliwidget_spinner").hide();if(e=="fail"){jQuery(".iw-copy-container").addClass("failure")}else{jQuery("#side-sortables").append(e);jQuery("body").on("click",".iw_new_box h3, .iw_new_box .handlediv, .iw_new_box .postbox h3, .iw_new_box .postbox .handlediv",function(){var g=jQuery(this).parent(".postbox"),h=g.attr("id");g.toggleClass("closed");if(h){if(!g.hasClass("closed")&&jQuery.isFunction(postboxes.pbshow)){postboxes.pbshow(h)}else{if(g.hasClass("closed")&&jQuery.isFunction(postboxes.pbhide)){postboxes.pbhide(h)}}}});jQuery("body").on(".iw_new_box h3 a, .iw_new_box .postbox h3 a","click",function(g){g.stopPropagation()});jQuery(".iw-copy-container").addClass("success")}return false});return false};var iw_delete_meta_box=function(f){f.stopPropagation();if(jQuery(this).hasClass("disabled")){return false}jQuery(this).addClass("disabled");jQuery(".iw-copy-container,.iw-save-container").removeClass("success failure");var g=jQuery(this).attr("id");var c="#"+g;var b=jQuery(this).attr("href");var a=URLToArray(b);var d=a.iwdelete;jQuery("#intelliwidget_"+d+"_spinner").show();a.action="iw_delete";jQuery.post(IWAjax.ajaxurl,a,function(e){jQuery(c).removeClass("disabled");jQuery("#intelliwidget_"+d+"_spinner").hide();if(e=="success"){jQuery("#intelliwidget_section_meta_box_"+d).slideUp("fast",function(){jQuery("#intelliwidget_section_meta_box_"+d).remove()})}return false});return false};function URLToArray(a){var c={};var d=a.substring(a.indexOf("?")+1).split("&");for(var b=0;b<d.length;b++){var e=d[b].split("=");c[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return c};